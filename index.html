<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1"
    />
    <title>Class Replays</title>
    <style>
      body {
        font-family: system-ui, Arial, sans-serif;
        margin: 16px;
      }
      h1 {
        font-size: 20px;
        margin: 0 0 12px;
      }
      .list {
        display: grid;
        gap: 10px;
      }
      .item {
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .item a {
        text-decoration: none;
      }
      .meta {
        font-size: 12px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <h1>Class Replays</h1>
    <div
      id="list"
      class="list"
    ></div>

    <script>
      fetch("recordings.json", { cache: "no-store" })
        .then((r) => r.json())
        .then((data) => {
          data.sort((a, b) => new Date(b.start) - new Date(a.start));
          const list = document.getElementById("list");
          data.forEach((r) => {
            const d = new Date(r.start);
            const div = document.createElement("div");
            div.className = "item";
            div.innerHTML = `<a href="${r.link}" target="_blank">${
              r.topic || "Class recording"
            }</a>
             <div class="meta">${d.toLocaleString()}  â€¢  ${
              r.duration || ""
            }</div>`;
            list.appendChild(div);
          });
        });
    </script>
  </body>
</html>
